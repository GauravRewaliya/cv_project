<%= form_with(model: curriculum_vitae ) do |form| %>
  
  <% if curriculum_vitae.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(curriculum_vitae.errors.count, "error") %> errors found , cant be save</h2>

      <ul>
        <% curriculum_vitae.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  

  <div>
    <%= form.label "Candidate ID", style: "display: block" ,class: "text-white"%>
    <%= collection_select( nil , :candidate_id, Candidate.all, :id, :name, { include_blank: true ,selected: @curriculum_vitae.candidate&.id} )%>
  </div>

  

  <div>
    <%= form.label :objective, style: "display: block" ,class: "text-white"%>
    <%= form.text_field :objective ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
 </div>
 <div>
  <%= form.label "Profile Description", style: "display: block" ,class: "text-white"%>
  <%= form.text_area :profile_desc ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
</div>

<div>
  <%= form.label "Experience", style: "display: block" ,class: "text-white"%>
  <%= form.number_field :experience ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
</div>

<div>
  <%= form.label "Core Skill", style: "display: block" ,class: "text-white"%>
  <!-- <%= collection_select( nil , :core_skill_id, TechStack.all, :id, :title, { include_blank: true ,selected: curriculum_vitae.core_skill&.id } )%> -->
  
      <%= form.fields_for :curriculum_vitae_core_tech_attributes, curriculum_vitae.curriculum_vitae_core_tech do |cs| %>
      <%= cs.collection_select :tech_stack_id, TechStack.order(:title), :id, :title, { include_blank: true } %>
      <% end %>  
</div>
  <!-- skills ++ -->
  <div>
    <%= form.label :supportive_skills, style: "display: block" ,class: "text-white"%>
    <%= form.collection_select(:supportive_skill_ids, TechStack.all, :id, :title , {}, { multiple: true,  include_blank: false  ,id: 'supportive_skill'   }) %>
      <script>
        new MultiSelectTag('supportive_skill')  // id
      </script>
  </div>

  <div>
  <%= form.label "Projects", style: "display: block" ,class: "text-white"%>
  <%= form.collection_select(:project_ids, Project.all, :id, :title , {}, { multiple: true,  include_blank: false ,id: 'selectgr' }) %>

<script>
  new MultiSelectTag('selectgr')  // id
</script>
  </div>

  <div>
    <%= form.label "select profile image", class: "text-white" %>
    <%= form.file_field :image  ,class: "form-control"%>
  </div>

  <div>
    <%= form.label "Layout", style: "display: block" ,class: "text-white"%>
    <%= collection_select( nil , :template_format_id, TemplateFormat.all, :id, :name, { include_blank: true,selected: @curriculum_vitae.template_format&.id} )%>
  </div>
  
  <%= form.submit class: 'btn-primary'%>
  <% end%>
  