<%= form_with(model: profile , class: "") do |form| %>

  
  <% if profile.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(profile.errors.count, "error") %> errors found , cant be save</h2>

      <ul>
        <% profile.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group row">
   <%= form.label :email, style: "display: block" ,class: "text-white" %>
    <div class="col-sm-10">
      <%= form.text_field :email ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
    </div>
  </div>
  <div class="form-group row">
    <%= form.label :contact, style: "display: block" ,class: "text-white"%>
     <div class="col-sm-10">
       <%= form.text_field :contact ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
     </div>
   </div>

   <!-- <div class="form-group row">
    <%= form.label :skill, style: "display: block" ,class: "text-white"%>
     <div class="col-sm-10">
       <%= form.text_field :skill ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
     </div>
   </div> -->
   <div class="form-group row">
    <%= form.label :supportive_skills, style: "display: block" ,class: "text-white"%>
     <div class="col-sm-10">
        <%= form.collection_select(:supportive_skill_ids, TechStack.all, :id, :title , {}, { multiple: true,  include_blank: false  ,id: 'selectgr'   }) %>
      
        </select><script>
        new MultiSelectTag('selectgr')  // id
      </script>
    </div>
   </div>

   <div class="form-group row">
    <%= form.label "Core Skill", style: "display: block" ,class: "text-white"%>
     <div class="col-sm-10">
        <!-- nested  -->
      <!-- <%= form.fields_for :profile_core_tech_attributes, profile.profile_core_tech do |cs| %>
      <%= cs.collection_select :tech_stack_id, TechStack.order(:title), :id, :title, { include_blank: true } %>
      <% end %>   -->
      
      <!-- pass outer params  -->
      <!-- <%= collection_select( nil , :core_skill_id, TechStack.all, :id, :title, { include_blank: true } )%> -->
      <!-- is id , name is needed??>>  nil ,?// if name then name else this work ,TechStack.all--> 
      <%= collection_select( nil , :core_skill_id, TechStack.all, :id, :title, { include_blank: true ,selected: profile.core_skill&.id } )%>
      
    </div>
   </div>

   
   <div class="form-group row">
    <%= form.label :address, style: "display: block" ,class: "text-white"%>
     <div class="col-sm-10">
       <%= form.text_field :address ,style: "width: 100%;text-align: center;" ,class: "form-control"%>
     </div>
   </div>
    
   
         <div class="form-group row">
          <%= form.label "Name:", style: "display: block" ,class: "text-white"%>
           <div class="col-sm-10">
             
            <% if @profile.candidate_id %>
            <%= @profile.candidate.name %>
            
            <%else%>
            
            <% if params[:candidate_id] %>
            <!-- <%= form.text_field :candidate_id ,disabled: "disabled" ,value:  params[:candidate_id] ,style: "width: 100%;text-align: center;" ,class: "form-control"%> -->
            <%= form.hidden_field :candidate_id, value: params[:candidate_id] %>  
            <%="new id is:"+params[:candidate_id] +" for name:"+ Candidate.find(params[:candidate_id]).name%>
              <% else %>
              null
             <%end %> 
            <%end%>

            </div>
         </div>

  <div>
    <%= form.submit class: 'btn-primary'%>
  </div>
<% end %>
